<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C Client SDK for IBM Watson™ IoT: Gateway Development</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="iotf.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C Client SDK for IBM Watson™ IoT
   &#160;<span id="projectnumber">Version 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('iotpgateway.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Gateway Development </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>IoTP C Client SDK includes a shared library <code>libiotp-as-gateway.so</code> that exposes functions to build gateway client that runs on IoT gateways. The gateway client connects to the IBM Watson™ IoT Platform (WIoTP) service, and sends events to WIoTP service or receive commands from WIoTP service.</p>
<p>The following sections describe on how to configure, connect, send events, receive commands, disconnect and cleanup, a gateway client.</p>
<h3>Configure Gateway</h3>
<p>To use the gateway client, you need to create a gateway handle or instance of this client. Use the following steps to create a gateway handle:</p>
<ul>
<li>Include <code>iot_gateway.h</code> header file in the gateway client code.</li>
<li>Create a gateway configuration object <a class="el" href="iotp__config_8h.html#a07c19b2785d306118690c545f79e7df8">IoTPConfig</a>, by reading the configuration items from a file using <a class="el" href="iotp__config_8h.html#afa887d5deaf76130df8cf6fe429be55f">IoTPConfig_create()</a>, or from environment variables using <a class="el" href="iotp__config_8h.html#a86516ef3c44bc07caeed7e0e60bf25d1">IoTPConfig_readEnvironment()</a>. Refer to <a href="./iotpconfig.html">Configuration</a> page for details. If <code>IoTPConfig</code> is created successfully, on exit you must call <a class="el" href="iotp__config_8h.html#a438e8e030e3adae33ea1b4dc7eab9337">IoTPConfig_clear()</a> to clear configuration object.</li>
<li>Create a gateway handle. A valid gateway handle <a class="el" href="iotp__gateway_8h.html#aee81025fcaa049a06b1ff2f811b37035">IoTPGateway</a>, is available following a successful call to <a class="el" href="iotp__gateway_8h.html#a0ed28c219bfab055245606eba3fcbb78">IoTPGateway_create()</a>. If <code>IoTPGateway</code> handle is created successfully, on exit you must call <a class="el" href="iotp__gateway_8h.html#a7e63271f43f8147d8f4f788c1d2049ca">IoTPGateway_destroy()</a> to destroy the handle.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Though there is no restrictions on how many gateway client handles, a gateway application can create, it is a good practice to not to create many client handles to limit the number of connections to WIoTP service, and reduce load on the WIoTP service.</dd></dl>
<p>Sample code to configure a gateway client: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="iotp__gateway_8h.html">iotp_gateway.h</a>&gt;</span></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9">IOTPRC</a> rc = IOTP_SUCCESS;</div><div class="line">    <a class="code" href="iotp__config_8h.html#a07c19b2785d306118690c545f79e7df8">IoTPConfig</a> *config = NULL;</div><div class="line">    <a class="code" href="iotp__gateway_8h.html#aee81025fcaa049a06b1ff2f811b37035">IoTPGateway</a> *gateway = NULL;</div><div class="line">    <span class="comment">// Create IoTPConfig object using configuration options defined in the configuration file.</span></div><div class="line">    rc = <a class="code" href="iotp__config_8h.html#afa887d5deaf76130df8cf6fe429be55f">IoTPConfig_create</a>(&amp;config, <span class="stringliteral">&quot;configFilePath&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        exit(1);</div><div class="line">    }</div><div class="line">    <span class="comment">// Create IoTPGateway object</span></div><div class="line">    rc = <a class="code" href="iotp__gateway_8h.html#a0ed28c219bfab055245606eba3fcbb78">IoTPGateway_create</a>(&amp;gateway, config);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        <a class="code" href="iotp__config_8h.html#a438e8e030e3adae33ea1b4dc7eab9337">IoTPConfig_clear</a>(config);</div><div class="line">        exit(1);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Add code to connect, send event or receive commands</span></div><div class="line"></div><div class="line">    <span class="comment">// On exit call cleanup APIs</span></div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a7e63271f43f8147d8f4f788c1d2049ca">IoTPGateway_destroy</a>(gateway);</div><div class="line">    <a class="code" href="iotp__config_8h.html#a438e8e030e3adae33ea1b4dc7eab9337">IoTPConfig_clear</a>(config);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h3>Connect Gateway</h3>
<p>You can connect a gateway clienti to WIoTP service using <a class="el" href="iotp__gateway_8h.html#a4af2a6f3087a46175b67e7815d0a3f7b">IoTPGateway_connect()</a>. This will allow the gateway client to send events, or receive and process commands. If gateway client is connected to WIoTP service successfully, on exit you must call <a class="el" href="iotp__gateway_8h.html#a4033bb0e7ffba1e64841ce6574cfb598">IoTPGateway_disconnect()</a> to disconnect the gateway client.</p>
<p>Sample code to connect a gateway client: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="iotp__gateway_8h.html">iotp_gateway.h</a>&gt;</span></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9">IOTPRC</a> rc = <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Add code to configure the gateway client</span></div><div class="line"></div><div class="line">    <span class="comment">// Connect gateway</span></div><div class="line">    rc = <a class="code" href="iotp__gateway_8h.html#a4af2a6f3087a46175b67e7815d0a3f7b">IoTPGateway_connect</a>(gateway);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        <span class="comment">// User defined code to handle connection failures, for example wait</span></div><div class="line">        <span class="comment">// for some time and retry connection. Or on exit invoke cleanup APIs.</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Add code to send event or receive commands</span></div><div class="line"></div><div class="line">    <span class="comment">// On exit call cleanup APIs</span></div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a4033bb0e7ffba1e64841ce6574cfb598">IoTPGateway_disconnect</a>(gateway);</div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a7e63271f43f8147d8f4f788c1d2049ca">IoTPGateway_destroy</a>(gateway);</div><div class="line">    <a class="code" href="iotp__config_8h.html#a438e8e030e3adae33ea1b4dc7eab9337">IoTPConfig_clear</a>(config);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h3>Send Event</h3>
<p>Gateway can provide various types of information, for example data collected by the gateway (telemtry data), current status of the gateway etc. Events are the mechanism by which gateways publish data to WIoTP service. Gateways control the content of their messages, and assign a name for each event that is sent. WIoTP service uses the credentials that are attached to each event received to determine which gateway sent the event. This architecture prevents gateways from impersonating one another.</p>
<p>Events can be published with any of the three quality of service (QoS) levels that are defined by the MQTT protocol. By default, events are published with a QoS level of 0. Optonally you can send MQTT V5 properties. For details on MQTT V5 properties, refer to &lt;a href="https://www.eclipse.org/paho/files/mqttdoc/MQTTAsync/html/struct_m_q_t_t_properties.html" target="_blank"}MQTTProperties.</p>
<p>To send an event to WIoTP service, you can use <a class="el" href="iotp__gateway_8h.html#a82b886876e3328c765f2805b224a9f31">IoTPGateway_sendEvent()</a>.</p>
<p>Sample code to send event (in JSON format) and no MQTT V5 properties: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="iotp__gateway_8h.html">iotp_gateway.h</a>&gt;</span></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9">IOTPRC</a> rc = <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Add code to configure and connect the gateway client</span></div><div class="line"></div><div class="line">    <span class="comment">// Sample event data in json format</span></div><div class="line">    <span class="keywordtype">char</span> *data = <span class="stringliteral">&quot;{\&quot;d\&quot; : {\&quot;SensorID\&quot;: \&quot;Test\&quot;, \&quot;Reading\&quot;: 7 }}&quot;</span>;</div><div class="line">    <span class="comment">// Send status event with QoS0 and no MQTT properties</span></div><div class="line">    rc = <a class="code" href="iotp__gateway_8h.html#a82b886876e3328c765f2805b224a9f31">IoTPGateway_sendEvent</a>(gateway,<span class="stringliteral">&quot;status&quot;</span>, data, <span class="stringliteral">&quot;json&quot;</span>, QoS0, NULL);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        <span class="comment">// User defined code to handle send failures. Or on exit invoke cleanup APIs.</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Add code to receive and process commands, if required</span></div><div class="line"></div><div class="line">    <span class="comment">// On exit call cleanup APIs</span></div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a4033bb0e7ffba1e64841ce6574cfb598">IoTPGateway_disconnect</a>(gateway);</div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a7e63271f43f8147d8f4f788c1d2049ca">IoTPGateway_destroy</a>(gateway);</div><div class="line">    <a class="code" href="iotp__config_8h.html#a438e8e030e3adae33ea1b4dc7eab9337">IoTPConfig_clear</a>(config);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>Sample code to send event (in JSON format) and MQTT V5 properties: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="iotp__gateway_8h.html">iotp_gateway.h</a>&gt;</span></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9">IOTPRC</a> rc = <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Add code to configure and connect the gateway client</span></div><div class="line"></div><div class="line">    <span class="comment">// Set MQTT V5 properties</span></div><div class="line">    MQTTProperties *properties = (MQTTProperties *)malloc(<span class="keyword">sizeof</span> MQTTProperties);</div><div class="line">    MQTTProperty   property;</div><div class="line">    <span class="keyword">property</span>.identifier = MQTTPROPERTY_CODE_USER_PROPERTY;</div><div class="line">    <span class="keyword">property</span>.value.data.data = <span class="stringliteral">&quot;user defined property&quot;</span>;</div><div class="line">    <span class="keyword">property</span>.value.data.len = (int)strlen(property.value.data.data);</div><div class="line">    <span class="keyword">property</span>.value.value.data = <span class="stringliteral">&quot;user defined property value&quot;</span>;</div><div class="line">    <span class="keyword">property</span>.value.value.len = (int)strlen(property.value.value.data);</div><div class="line">    rc = MQTTProperties_add(properties, &amp;property);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        <span class="comment">// User defined code to handle failure. Or on exit invoke cleanup APIs.</span></div><div class="line">    }</div><div class="line">    <span class="comment">// Sample event data in json format</span></div><div class="line">    <span class="keywordtype">char</span> *data = <span class="stringliteral">&quot;{\&quot;d\&quot; : {\&quot;SensorID\&quot;: \&quot;Test\&quot;, \&quot;Reading\&quot;: 7 }}&quot;</span>;</div><div class="line">    <span class="comment">// Send status event with QoS0 and no MQTT properties</span></div><div class="line">    rc = <a class="code" href="iotp__gateway_8h.html#a82b886876e3328c765f2805b224a9f31">IoTPGateway_sendEvent</a>(gateway,<span class="stringliteral">&quot;status&quot;</span>, data, <span class="stringliteral">&quot;json&quot;</span>, QoS0, properties);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        <span class="comment">// User defined code to handle failure. Or on exit invoke cleanup APIs.</span></div><div class="line">    }</div><div class="line">    <span class="comment">// Free MQTT V5 properties</span></div><div class="line">    MQTTProperties_free(properties);</div><div class="line"></div><div class="line">    <span class="comment">// Add code to receive commands and process, if required</span></div><div class="line"></div><div class="line">    <span class="comment">// On exit call cleanup APIs</span></div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a4033bb0e7ffba1e64841ce6574cfb598">IoTPGateway_disconnect</a>(gateway);</div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a7e63271f43f8147d8f4f788c1d2049ca">IoTPGateway_destroy</a>(gateway);</div><div class="line">    <a class="code" href="iotp__config_8h.html#a438e8e030e3adae33ea1b4dc7eab9337">IoTPConfig_clear</a>(config);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h3>Receive Command</h3>
<p>Commands are the mechanism by which applications communicate with gateways. Only applications can send commands, and the commands are sent to specific gateways. The gateway must determine which action to take on receipt of any given command. The gateway client must register a callback function to process the received command.</p>
<p>There are two ways to register a callback and subscribe to commands:</p>
<ol type="1">
<li>A gateway client can subscribe to commands using <a class="el" href="iotp__gateway_8h.html#a942ad575352ba8e79553eb4807723b89">IoTPGateway_subscribeToCommands()</a>. To process received commands, you must register a command callback. Use <a class="el" href="iotp__gateway_8h.html#a588efc378fb3b6b7ce643cc2732ea14c">IoTPGateway_setCommandHandler()</a> to set command callback or handler for all commands.</li>
<li>You can also use <a class="el" href="iotp__gateway_8h.html#ad043482ed57f4b4d469be4f44359db98">IoTPGateway_handleCommand()</a> to register a command callback and subscribe to a specific command.</li>
</ol>
<p>Sample code to receive commands by a gateway client: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="iotp__gateway_8h.html">iotp_gateway.h</a>&gt;</span></div><div class="line"><span class="keywordtype">void</span>  gatewayCommandCallback (<span class="keywordtype">char</span>* type, <span class="keywordtype">char</span>* <span class="keywordtype">id</span>, <span class="keywordtype">char</span>* commandName, <span class="keywordtype">char</span> *format, <span class="keywordtype">void</span>* payload, <span class="keywordtype">size_t</span> payloadSize)</div><div class="line">{</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;Received gateway command:\n&quot;</span>);</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;Type=%s ID=%s CommandName=%s Format=%s Len=%d\n&quot;</span>,</div><div class="line">        type?type:<span class="stringliteral">&quot;&quot;</span>, <span class="keywordtype">id</span>?<span class="keywordtype">id</span>:<span class="stringliteral">&quot;&quot;</span>, commandName?commandName:<span class="stringliteral">&quot;&quot;</span>, format?format:<span class="stringliteral">&quot;&quot;</span>, (<span class="keywordtype">int</span>)payloadSize);</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;Payload: %s\n&quot;</span>, payload?(<span class="keywordtype">char</span> *)payload:<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Gateway developers - add your custom code to process gateway commands</span></div><div class="line">}</div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9">IOTPRC</a> rc = IOTP_SUCCESS;</div><div class="line"></div><div class="line">    <span class="comment">// Add code to configure and connect the gateway client</span></div><div class="line"></div><div class="line">    rc = <a class="code" href="iotp__gateway_8h.html#a588efc378fb3b6b7ce643cc2732ea14c">IoTPGateway_setCommandHandler</a>(gateway, gatewayCommandCallback);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        <span class="comment">// User defined code to handle failure, or call APIs to cleanup and exit</span></div><div class="line">    }</div><div class="line">    <span class="keywordtype">char</span> *commandName = <span class="stringliteral">&quot;+&quot;</span>; <span class="comment">// use wildcard subscription</span></div><div class="line">    <span class="keywordtype">char</span> *format = <span class="stringliteral">&quot;+&quot;</span>;      <span class="comment">// use wildcard to receive command in any format. e.g. json, text etc</span></div><div class="line">    rc = <a class="code" href="iotp__gateway_8h.html#a942ad575352ba8e79553eb4807723b89">IoTPGateway_subscribeToCommands</a>(gateway, commandName, format);</div><div class="line">    <span class="keywordflow">if</span> ( rc != <a class="code" href="iotp__rc_8h.html#a3687cd953aa67710962875d9196dc2d9a79948a3653fcc5254599100b9aabab88">IOTPRC_SUCCESS</a> ) {</div><div class="line">        <span class="comment">// User defined code to handle failure. Or exit invoke cleanup APIs.</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Add code to send events if required. Refer to &quot;Send Event&quot; section for details.</span></div><div class="line"></div><div class="line">    <span class="comment">// Add calls to cleanup APIs. Refer to &quot;Disconnect and Cleanup&quot; section for details.</span></div><div class="line"></div><div class="line">    <span class="comment">// On exit call cleanup APIs </span></div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a4033bb0e7ffba1e64841ce6574cfb598">IoTPGateway_disconnect</a>(gateway);</div><div class="line">    <a class="code" href="iotp__gateway_8h.html#a7e63271f43f8147d8f4f788c1d2049ca">IoTPGateway_destroy</a>(gateway);</div><div class="line">    <a class="code" href="iotp__config_8h.html#a438e8e030e3adae33ea1b4dc7eab9337">IoTPConfig_clear</a>(config);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 1 2019 22:54:54 for C Client SDK for IBM Watson™ IoT by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
